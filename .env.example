# =====================================================
# REVENUE RADAR - ENVIRONMENT CONFIGURATION
# =====================================================
# Copy this file to .env and update with your values
# NEVER commit .env to git!
# =====================================================

# =====================================================
# SERVER CONFIGURATION
# =====================================================
NODE_ENV=development
PORT=5050
HOST=localhost

# =====================================================
# SECURITY & AUTHENTICATION
# =====================================================
# CRITICAL: Generate a strong random secret for production!
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_THIS_IN_PRODUCTION_use_crypto_randomBytes_64_hex

# JWT token expiration times
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_EXPIRES_IN=30d

# Password security
BCRYPT_ROUNDS=10
MAX_FAILED_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_MINUTES=15

# =====================================================
# CORS & ALLOWED ORIGINS
# =====================================================
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5050,http://127.0.0.1:5050

# =====================================================
# DATABASE CONFIGURATION
# =====================================================
DATABASE_PATH=./revenue-radar.db

# Backup settings
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_INTERVAL_HOURS=24
DATABASE_BACKUP_RETENTION_DAYS=30
DATABASE_BACKUP_PATH=./backups

# =====================================================
# RATE LIMITING
# =====================================================
# General API rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Login rate limiting (stricter)
LOGIN_RATE_LIMIT_WINDOW_MS=900000
LOGIN_RATE_LIMIT_MAX_REQUESTS=5

# =====================================================
# EMAIL CONFIGURATION (SMTP)
# =====================================================
# For signup verification, trial warnings, password resets
# REQUIRED for self-service trial signups to work!
# =====================================================

# RECOMMENDED: Gmail (FREE & Easy - 2 minute setup)
# --------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-gmail-app-password-here

# Email sender info
FROM_NAME=Revenue Radar
FROM_EMAIL=noreply@revenueradar.com
APP_URL=http://localhost:5050

# Support contact
EMAIL_SUPPORT_ADDRESS=support@revenueradar.com

# =====================================================
# HOW TO GET GMAIL APP PASSWORD (Takes 2 Minutes!)
# =====================================================
#
# What is a Gmail App Password?
# ------------------------------
# A Gmail App Password is Google's SECURE way to let apps
# send emails through your Gmail WITHOUT using your real password.
#
# Benefits:
# ✅ FREE (uses your existing Gmail account)
# ✅ SECURE (separate password just for this app)
# ✅ EASY (create in 2 minutes)
# ✅ REVOKABLE (disable anytime without changing Gmail password)
#
# Step-by-Step Setup:
# -------------------
# 1. Enable 2-Factor Authentication (2FA) on your Gmail:
#    → Go to: https://myaccount.google.com/security
#    → Find "Signing in to Google"
#    → Click "2-Step Verification" → Turn it ON
#    → Follow prompts (use phone number for verification)
#
# 2. Create App Password:
#    → Go to: https://myaccount.google.com/apppasswords
#    → Select app: "Mail"
#    → Select device: "Other" → Type "Revenue Radar"
#    → Click "Generate"
#    → Google shows you a 16-character password (like: abcd efgh ijkl mnop)
#
# 3. Copy & Paste:
#    → Copy that 16-character password
#    → Paste into SMTP_PASS above (remove spaces)
#    → Update SMTP_USER with your Gmail address
#
# 4. Done! Your signup emails will now send for FREE.
#
# Security Notes:
# ---------------
# • App Passwords are MORE secure than your main password
# • You can delete them anytime from your Google account
# • Each app gets its own unique password
# • If leaked, just revoke it (your Gmail password stays safe)
#
# =====================================================
# ALTERNATIVE FREE EMAIL PROVIDERS
# =====================================================
#
# SendGrid (Free: 100 emails/day)
# --------------------------------
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key
# Sign up: https://sendgrid.com/pricing/
#
# Mailgun (Free: 5,000 emails/month for 3 months)
# ------------------------------------------------
# SMTP_HOST=smtp.mailgun.org
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=postmaster@your-domain.mailgun.org
# SMTP_PASS=your-mailgun-smtp-password
# Sign up: https://www.mailgun.com/pricing/
#
# =====================================================
# DEVELOPMENT MODE (No Email Config Needed)
# =====================================================
# If you leave SMTP_USER and SMTP_PASS blank:
# • System still works normally
# • Emails print to console instead of sending
# • Verification links show in terminal (for testing)
# • Perfect for local development!
#
# =====================================================
# PRODUCTION DEPLOYMENT
# =====================================================
# When deploying to DigitalOcean:
# 1. Update APP_URL to your domain:
#    APP_URL=https://revenueradar.yourdomain.com
#
# 2. Update FROM_EMAIL to your domain:
#    FROM_EMAIL=noreply@yourdomain.com
#
# 3. Set these in DigitalOcean Environment Variables:
#    → App Settings → Environment Variables
#    → Add: SMTP_USER, SMTP_PASS, APP_URL, FROM_EMAIL
#    → NEVER commit .env to Git!
#
# =====================================================
# TROUBLESHOOTING EMAIL ISSUES
# =====================================================
#
# Emails not sending?
# -------------------
# ✓ Check Gmail 2FA is enabled
# ✓ Use App Password, NOT your Gmail password
# ✓ Remove spaces from App Password
# ✓ SMTP_USER = full Gmail address (user@gmail.com)
#
# "Invalid login" error?
# ----------------------
# → App Password is incorrect
# → Generate new one at: https://myaccount.google.com/apppasswords
# → Copy carefully (no spaces)
#
# Emails going to spam?
# ---------------------
# → Use custom domain for FROM_EMAIL
# → Set up SPF/DKIM records
# → For production, consider SendGrid or Mailgun
#
# Port blocked?
# -------------
# → Try port 465 with SMTP_SECURE=true
# → Check firewall isn't blocking port 587
#
# =====================================================

# =====================================================
# CLAUDE AI CONFIGURATION
# =====================================================
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Model selection
CLAUDE_MODEL=claude-3-5-sonnet-20241022

# Rate limiting for AI calls
CLAUDE_MAX_RETRIES=3
CLAUDE_TIMEOUT_MS=30000

# =====================================================
# LOGGING & MONITORING
# =====================================================
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_SIZE=10485760
LOG_FILE_MAX_FILES=5

# Error tracking (Sentry, etc.)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =====================================================
# FEATURES & FLAGS
# =====================================================
# Feature flags for enabling/disabling features
FEATURE_EMAIL_AUTOPILOT=true
FEATURE_AI_ANALYSIS=true
FEATURE_API_KEYS=true

# Admin features
ADMIN_DASHBOARD_ENABLED=true
ERROR_TRACKING_ENABLED=true

# =====================================================
# STRIPE PAYMENT INTEGRATION
# =====================================================
# Required for subscription billing
# Get your keys at: https://dashboard.stripe.com/apikeys
#
# SETUP GUIDE:
# 1. Create Stripe account at https://stripe.com
# 2. Get API keys from Dashboard → Developers → API Keys
# 3. Copy "Secret key" (starts with sk_) → STRIPE_SECRET_KEY
# 4. Copy "Publishable key" (starts with pk_) → STRIPE_PUBLISHABLE_KEY
#
# For webhooks:
# 1. Go to Dashboard → Developers → Webhooks
# 2. Click "Add endpoint"
# 3. Set URL to: https://yourdomain.com/stripe/webhook
# 4. Select events: checkout.session.completed, customer.subscription.*
# 5. Copy "Signing secret" → STRIPE_WEBHOOK_SECRET
#
# Test mode keys (safe for development):
# - Use keys starting with sk_test_ and pk_test_
# - Use test card: 4242 4242 4242 4242
#
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_signing_secret_here

# =====================================================
# EXTERNAL INTEGRATIONS
# =====================================================
# Webhooks
WEBHOOK_SECRET=

# =====================================================
# SESSION & CACHE
# =====================================================
SESSION_SECRET=another-random-secret-change-in-production
SESSION_TIMEOUT_MINUTES=1440

# Redis (if using Redis for sessions/cache)
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# =====================================================
# FILE UPLOAD LIMITS
# =====================================================
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=pdf,xlsx,xls,csv

# =====================================================
# SSL/HTTPS (Production)
# =====================================================
# Set to true to enable HTTPS
HTTPS_ENABLED=false

# SSL certificate paths (if using custom certs)
SSL_KEY_PATH=./ssl/private-key.pem
SSL_CERT_PATH=./ssl/certificate.pem
SSL_CA_PATH=./ssl/ca-bundle.pem

# Force HTTPS redirect
FORCE_HTTPS=false

# =====================================================
# PERFORMANCE & OPTIMIZATION
# =====================================================
# Enable compression
COMPRESSION_ENABLED=true

# Enable caching
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300

# =====================================================
# DEVELOPMENT & DEBUGGING
# =====================================================
# Enable detailed error messages (development only!)
DEBUG_MODE=false
VERBOSE_LOGGING=false

# Allow test data creation
ALLOW_TEST_DATA=false

# =====================================================
# BACKUP & DISASTER RECOVERY
# =====================================================
# S3 backup (optional, for production)
S3_BACKUP_ENABLED=false
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_S3_REGION=us-east-1

# =====================================================
# NOTIFICATIONS
# =====================================================
# Slack notifications for instant alerts (HIGHLY RECOMMENDED!)
# ----------------------------------------------------------
# Get a Slack webhook in 2 minutes:
# 1. Go to: https://api.slack.com/apps
# 2. Click "Create New App" → "From scratch"
# 3. Name it "Revenue Radar Alerts", pick your workspace
# 4. Click "Incoming Webhooks" → Turn ON
# 5. Click "Add New Webhook to Workspace"
# 6. Pick a channel (e.g. #revenue-radar-alerts)
# 7. Copy the webhook URL below
#
# What you'll get in Slack:
# • New access request alerts (approve/deny with one click!)
# • Quality score badge for each request
# • Critical error notifications
#
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_NOTIFICATIONS_ENABLED=true

# Email notifications (admin gets email + Slack for redundancy)
EMAIL_NOTIFICATIONS_ENABLED=true
ADMIN_NOTIFICATION_EMAIL=your-email@example.com

# =====================================================
# ANALYTICS & TRACKING
# =====================================================
# Google Analytics (optional)
GA_TRACKING_ID=

# Mixpanel (optional)
MIXPANEL_TOKEN=

# =====================================================
# LEGAL & COMPLIANCE
# =====================================================
# GDPR compliance
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365

# Cookie consent
COOKIE_CONSENT_REQUIRED=true

# =====================================================
# CUSTOM CONFIGURATION
# =====================================================
# Add your custom environment variables below
